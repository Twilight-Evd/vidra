# Vidra

## 项目简介

Vidra 是一个在**闲暇时间**借助 **AI Antigravity**（以 AI 辅助开发为主）完成的 **Flutter 桌面端视频播放框架与技术实验项目**。

项目核心目标并非提供具体内容服务，而是围绕以下技术方向进行探索与实践：

- 跨平台桌面端视频播放能力
- 可插拔的数据源抽象设计
- 多语言、多主题、多窗口的应用架构
- AI 辅助开发在真实项目中的应用方式

Vidra 更偏向于一个**播放器能力验证与架构示例**，适用于学习、研究与个人技术实践场景。

---

## 设计理念

- 🧱 **框架化设计**：以播放器能力与架构为核心，而非内容本身
- 🔌 **可插拔数据源**：通过抽象接口接入不同数据来源，实现解耦
- 🌍 **跨平台一致性**：统一代码结构，支持 macOS / Windows
- 🎨 **多形态 UI 能力**：多语言、多主题、多窗口并存
- 🤖 **AI 辅助工程实践**：探索 AI 在真实开发流程中的边界与效率
- 🧪 **学习与研究导向**：不以产品化或商业化为目标

---

## 数据源说明

Vidra 本身**不内置、也不提供任何固定的视频内容服务**。

- 项目通过 **Data Source 抽象层** 进行数据接入
- 当前仓库中仅包含 **示例级数据源实现（olevod）**，用于验证架构可行性
- 所有示例数据**均归原始平台或内容提供方所有**
- 示例实现仅用于技术研究，不构成任何内容分发行为

开发者可基于该抽象层自行实现符合当地法律法规的数据源。

---

## 使用声明（非常重要）

⚠️ **请在使用或二次开发前仔细阅读以下声明**：

- Vidra 是一个**技术研究与播放器框架示例项目**
- 项目代码本身**不提供、不托管、不分发任何视频内容**
- 仓库中出现的任何数据源实现仅用于**架构与技术验证示例**
- 本项目不包含任何形式的商业行为，包括广告、收费或内容变现
- 使用者在本地运行或自行扩展数据源时，应**自行确保符合当地法律法规**
- 作者不对使用者的具体使用方式及其可能产生的法律后果承担责任

如不同意以上声明，请勿使用或传播本项目代码。

---

## 核心架构思路

### 1. 窗口系统：基于 bitsdojo_window 的桌面能力扩展

项目在桌面窗口控制层面，引入并基于开源插件 **bitsdojo_window**（https://github.com/bitsdojo/bitsdojo_window） 进行实现。

bitsdojo_window 提供了 Flutter 桌面端中非常关键但官方尚未完全覆盖的能力，包括：

- 无边框窗口（Frameless Window）
- 自定义标题栏（Custom Title Bar）
- 窗口拖拽、缩放与系统按钮控制

在 Vidra 中，bitsdojo_window 被视为**基础窗口能力层**，用于支撑更高层的桌面应用体验，而不是简单地“美化窗口”。

---

### 2. 基于 AI 的 bitsdojo_window 能力升级与扩展

在原有 bitsdojo_window 能力之上，项目借助 **AI Antigravity** 对窗口系统进行了进一步的设计与增强，**bitsdojo_window_plus**（https://github.com/Twilight-Evd/bitsdojo_window_plus/tree/plus）探索其在复杂桌面应用中的可能性：

- 🪟 **多窗口管理模型**：
  - 主窗口、播放窗口、辅助窗口职责拆分
  - 窗口状态与业务状态解耦

- 🎨 **窗口级主题与样式系统**：
  - 窗口装饰与应用主题联动
  - 支持不同窗口使用不同 UI 表现形式

- 🧠 **AI 辅助窗口交互设计**：
  - 通过 AI 推导窗口交互模式
  - 优化拖拽、切换、多窗口协同体验

这些扩展并非对 bitsdojo_window 的替代，而是在其稳定能力之上，构建更高层的 **Desktop Window Framework Abstraction**。

---

### 3. 视频播放引擎：基于 fvp 的跨平台播放能力

在视频播放能力层，项目选用并集成了 **fvp（Flutter Video Player）** 插件（https://pub.dev/packages/fvp），作为核心播放引擎。

fvp 是在 Flutter 官方 `video_player` 体系之上的增强实现，重点解决了桌面端和多平台场景下的性能与格式兼容性问题。

其在本项目中的定位是：**稳定、可扩展的视频播放基础设施层**，而非简单的 UI 组件。

#### fvp 的关键能力

- 🎥 **跨平台一致性**：支持 macOS、Windows、Linux 及移动端，适合桌面优先的架构设计
- ⚡ **硬件加速解码**：优先使用系统原生解码能力，降低资源占用
- 🧩 **更丰富的格式支持**：基于 FFmpeg 后端，兼容更多视频编码格式
- 🔁 **与官方 API 高度兼容**：可在保持 `video_player` 使用方式的前提下无缝接入
- 🛠 **更低层的扩展接口**：为后续高级功能（如截图、录制、精细化控制）提供可能

通过 fvp，Vidra 将“播放能力”与“播放来源”完全解耦，使其更符合播放器框架而非具体应用的设计目标。

---

### 4. 数据源抽象（Data Source Abstraction）

播放器并不直接依赖任何具体内容来源，而是通过统一的数据源接口获取：

- 列表数据
- 剧集结构
- 播放地址

这种设计使播放器本身保持“纯净”，数据来源只是**可替换的实现细节**。

---

### 5. 播放能力与业务逻辑解耦

播放能力被视为一项底层基础设施：

- UI 只关心状态
- 业务逻辑只关心数据结构
- 播放器只关心流媒体本身

这种分层方式让项目在功能增加时不会迅速复杂化。

---

### 6. 多语言 / 多主题 / 多窗口

桌面端应用天然更适合复杂 UI 结构，因此项目在一开始就验证了：

- 国际化（i18n）能力
- 主题系统的可扩展性
- 多窗口并行存在的可行性

这些能力共同构成了一个**更接近真实桌面软件的 Flutter 架构示例**。

---

## 本地运行与开发

### 运行环境要求

- Flutter SDK（建议使用 **stable 最新版本**）
- 已开启对应平台的桌面支持
  - macOS：Xcode
  - Windows：Visual Studio（含 Desktop development with C++）

### 启用桌面端支持

```bash
flutter config --enable-macos-desktop
flutter config --enable-windows-desktop
```

### 获取依赖

```bash
flutter pub get
```

### 本地运行

#### macOS

```bash
flutter run -d macos
```

#### Windows

```bash
flutter run -d windows
```

### 构建 Release 版本

#### macOS

```bash
flutter build macos --release
```

#### Windows

```bash
flutter build windows --release
```

构建产物位于：

- macOS：`build/macos/Build/Products/Release/`
- Windows：`build/windows/x64/runner/Release/`

---

## 技术文章 / 项目介绍

# Flutter Desktop Media Framework Demo：一次播放器架构与 AI 辅助开发的实践

## 背景

在 Flutter 对桌面端（macOS / Windows）支持逐渐成熟之后，如何构建一个**结构清晰、可扩展、可维护**的多媒体播放框架，成为一个值得实践的问题。

Vidra 正是在这样的背景下诞生的。

它并非一个面向终端用户的内容产品，而是一个 **Flutter Desktop Media Framework Demo**，用于验证以下问题：

- Flutter 是否适合承担桌面端多媒体应用的核心逻辑
- 如何设计可插拔的数据源架构
- 多语言、多主题、多窗口在桌面端的合理组织方式
- AI 在真实工程项目中能发挥怎样的辅助作用

---

## 项目定位

Vidra 的定位非常明确：

> **一个用于演示和验证播放器能力的技术框架示例项目，而非内容平台。**

项目关注的是：

- 播放能力是否稳定
- 架构是否足够解耦
- 扩展成本是否可控

而不是：

- 播放什么内容
- 内容从何而来
- 面向普通用户的产品体验

---

## AI 在项目中的角色

Vidra 并不是“AI 自动生成的项目”，但 AI 在其中承担了重要的辅助角色：

- 架构方案讨论
- 重复性代码生成
- 问题定位与重构建议

AI 被视为一个 **工程协作者**，而不是替代开发者的工具。

---

## 这个项目适合谁？

- 希望学习 **Flutter Desktop 架构设计** 的开发者
- 对 **多媒体播放** 有兴趣的工程师
- 想探索 **AI 辅助开发实际效果** 的技术人员

如果你的目标是内容分发或商业产品，这个项目并不适合你。

---

## 总结

Vidra 是一次克制而清晰的工程实践：

- 不讨论内容
- 不追求产品化
- 只验证技术可行性

它更像是一份：

> **Flutter 桌面端多媒体框架的实验报告。**

---

## License

本项目基于 **MIT License** 开源，仅代码本身遵循该协议，**不包含任何第三方内容授权**。
